{{/* grid.html â€” custom view for grid layout */}}
{{ $items := .Items }}

<style>
  .grid-container {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
    gap: 24px;
    padding: 20px 10px;
  }

  .grid-card {
    background: #fff;
    border-radius: 12px;
    box-shadow: 0 4px 10px rgba(0,0,0,0.08);
    overflow: hidden;
    transition: all 0.3s ease;
  }

  .grid-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 6px 18px rgba(0,0,0,0.12);
  }

  .grid-card img {
    width: 100%;
    height: 200px;
    object-fit: cover;
  }

  .grid-card-content {
    padding: 16px 20px;
  }

  .grid-card-content h3 {
    margin: 0 0 8px;
    font-size: 1.1rem;
    font-weight: 600;
  }

  .grid-card-content p {
    font-size: 0.95rem;
    color: #555;
  }
</style>

<div class="grid-container">
  {{ range $items }}
    {{ $link := .RelPermalink }}
    {{ $image := partial "blox-core/functions/get_featured_image.html" . }}
    {{ $anchor := .Params.image.focal_point | default "Smart" }}
    {{ if $image }}
      {{ $processed := $image.Fill (printf "800x600 %s" $anchor) }}
      {{ if ne $processed.MediaType.SubType "gif" }}{{ $processed = $processed.Process "webp" }}{{ end }}
    {{ end }}

    <div class="grid-card">
      <a href="{{ $link }}">
        {{ with $processed }}
          <img src="{{ .RelPermalink }}" alt="{{ $.Title }}" loading="lazy">
        {{ end }}
      </a>
      <div class="grid-card-content">
        <h3><a href="{{ $link }}">{{ .Title }}</a></h3>
        {{ with .Summary }}
          <p>{{ . }}</p>
        {{ end }}
      </div>
    </div>
  {{ end }}
</div>

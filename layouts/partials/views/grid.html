<div class="project-section">
  <div class="project-grid">
    {{ range (where site.RegularPages "Type" "project") }}
      {{ $item := . }}
      {{ $link := $item.RelPermalink }}
      {{ $target := "" }}
      {{ if $item.Params.external_link }}
        {{ $link = $item.Params.external_link }}
        {{ $target = "target=\"_blank\" rel=\"noopener\"" }}
      {{ end }}

      {{/* Get summary */}}
      {{ $summary := "" }}
      {{ if $item.Params.summary }}
        {{ $summary = $item.Params.summary | markdownify | emojify }}
      {{ else if $item.Params.abstract }}
        {{ $summary = $item.Params.abstract | markdownify | emojify }}
      {{ else if $item.Summary }}
        {{ $summary = $item.Summary }}
      {{ end }}

      <div class="card-simple view-card">
        {{ $resource := partial "blox-core/functions/get_featured_image.html" $item }}
        {{ $anchor := $item.Params.image.focal_point | default "center" }}
        {{ with $resource }}
          {{ $image := .Fill (printf "808x455 %s" $anchor) }}
          {{ if ne $image.MediaType.SubType "gif" }}{{ $image = $image.Process "webp" }}{{ end }}
          <a href="{{ $link }}" {{ $target | safeHTMLAttr }}>
            <div class="img-hover-zoom">
              <img src="{{ $image.RelPermalink }}" alt="{{ $item.Title }}" class="article-banner" loading="lazy">
            </div>
          </a>
        {{ end }}

        <div class="section-subheading article-title mb-1 mt-3">
          <a href="{{ $link }}" {{ $target | safeHTMLAttr }}>{{ $item.Title }}</a>
        </div>

        {{ with $summary }}
        <a href="{{ $link }}" {{ $target | safeHTMLAttr }} class="summary-link">
          <div class="article-style">
            <p>{{ . }}</p>
          </div>
        </a>
        {{ end }}
      </div>
    {{ end }}
  </div>
</div>

<style>
.project-section {
  margin-top: 40px;
  margin-bottom: 60px;
}

.project-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 24px;
}

.card-simple.view-card {
  background: #fff;
  border-radius: 14px;
  box-shadow: 0 2px 10px rgba(0,0,0,0.05);
  transition: all 0.25s ease-in-out;
  overflow: hidden;
}

.card-simple.view-card:hover {
  transform: translateY(-6px);
  box-shadow: 0 8px 20px rgba(0,0,0,0.1);
}

.card-simple.view-card img.article-banner {
  width: 100%;
  height: 220px;
  object-fit: cover;
}

.card-simple.view-card .article-title a {
  font-weight: 600;
  color: #222;
  text-decoration: none;
}

.card-simple.view-card .article-style p {
  font-size: 0.95rem;
  color: #666;
}
</style>
